import{l as Q,a as Z,r as l,k as C,j as e,X as P,S as ee}from"./index-CJnD_gLK.js";import{u as se}from"./useScrollLock-DQTMuiZ-.js";import{P as G}from"./plus-BHj-BRdV.js";import{S as H}from"./save-D0EATYqx.js";import{C as re,a as oe}from"./circle-alert-BOUykBCR.js";import{S as ae}from"./square-pen-DwoAyZhr.js";import{T as te}from"./trash-2-BWDTMKj5.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ne=Q("chevron-right",ie);function fe(){const c=Z(s=>s.push),[D,z]=l.useState([]),[R,x]=l.useState(!1),[b,p]=l.useState(!1),[j,_]=l.useState(!1),[g,S]=l.useState(null),[W,U]=l.useState(new Set),[N,B]=l.useState(""),[t,d]=l.useState({nome_perfil:"",descricao:"",permissoes:[]}),[u,E]=l.useState([]),[I,M]=l.useState(!1);l.useEffect(()=>{Y(),v()},[]),se(b||j);async function Y(){try{M(!0),console.log("üîç Tentando carregar permiss√µes do webhook...");const{data:s}=await C("webhook/list-permission",{method:"GET"});if(console.log("‚úÖ Resposta do webhook/list-permission:",s),s&&s.success&&Array.isArray(s.data)&&s.data.length>0){const r=s.data.map(o=>({id:parseInt(o.id),nome:o.nome||o.descricao.toLowerCase().replace(/[^a-z0-9]/g,"_"),descricao:o.descricao}));console.log("‚úÖ Permiss√µes carregadas do webhook:",r.length),console.log("‚úÖ Primeira permiss√£o:",r[0]),E(r);return}if(Array.isArray(s)&&s.length>0){const r=s.map(o=>({id:parseInt(o.id),nome:o.nome||o.descricao.toLowerCase().replace(/[^a-z0-9]/g,"_"),descricao:o.descricao}));console.log("‚úÖ Permiss√µes carregadas do webhook (formato direto):",r.length),E(r);return}console.log("‚ö†Ô∏è Webhook retornou dados inv√°lidos, usando permiss√µes padr√£o"),$()}catch(s){console.log("‚ö†Ô∏è Webhook list-permission n√£o dispon√≠vel, usando permiss√µes padr√£o:",s instanceof Error?s.message:"Erro desconhecido"),$()}finally{M(!1)}}function $(){console.log("üìã Carregando permiss√µes padr√£o...");const s=[{id:53,nome:"agente_execute",descricao:"Iniciar agente de prospec√ß√£o"},{id:54,nome:"saudacao_view",descricao:"Visualizar sauda√ß√µes"},{id:55,nome:"saudacao_update",descricao:"Editar sauda√ß√£o"},{id:56,nome:"saudacao_delete",descricao:"Deletar sauda√ß√£o"},{id:57,nome:"saudacao_select",descricao:"Selecionar sauda√ß√£o para agente"},{id:58,nome:"empresa_view",descricao:"Visualizar empresas"},{id:59,nome:"empresa_create",descricao:"Criar empresas"},{id:60,nome:"empresa_update",descricao:"Editar empresas"},{id:61,nome:"empresa_delete",descricao:"Deletar empresas"},{id:62,nome:"nav_empresas",descricao:"Acesso ao gerenciamento de empresas"},{id:63,nome:"usuario_view",descricao:"Visualizar usu√°rios"},{id:64,nome:"usuario_create",descricao:"Criar usu√°rios"},{id:65,nome:"usuario_update",descricao:"Editar usu√°rios"},{id:66,nome:"usuario_delete",descricao:"Deletar usu√°rios"},{id:67,nome:"perfil_view",descricao:"Visualizar perfis"},{id:68,nome:"perfil_create",descricao:"Criar perfis"},{id:69,nome:"perfil_update",descricao:"Editar perfis"},{id:70,nome:"perfil_delete",descricao:"Deletar perfis"}];E(s),console.log("‚úÖ Permiss√µes padr√£o carregadas:",s.length)}l.useEffect(()=>{(j||b)&&setTimeout(()=>{const s=document.querySelector("[data-edit-form]"),r=document.querySelector("[data-create-form]"),o=s||r;o&&o.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[j,b]);async function v(){try{x(!0),console.log("Carregando perfis...");const{data:s}=await C("webhook/list-profile",{method:"GET"});if(typeof s=="string"&&s.includes("<!DOCTYPE html>"))throw new Error("Webhook retornou HTML (404) - endpoint n√£o existe no n8n");let r=[];Array.isArray(s)&&(r=s.map(o=>{const a=(o.permissoes||[]).filter(i=>i!=null);return{id:parseInt(o.id),nome_perfil:o.nome_perfil,descricao:o.descricao,created_at:o.created_at,updated_at:o.updated_at,permissoes:a}})),z(r)}catch(s){console.error("Erro ao carregar perfis:",s),s.message?.includes("HTML")||s.message?.includes("404")?c({kind:"warning",message:"Webhook de perfis n√£o encontrado (404). Usando dados de exemplo."}):c({kind:"error",message:`Erro ao carregar perfis: ${s.message||"Erro desconhecido"}`});const r=[{id:1,nome_perfil:"administrador",descricao:"Acesso total ao sistema.",permissoes:u.map(o=>o.nome)},{id:2,nome_perfil:"gestor_empresa",descricao:"Acesso para gerenciar usu√°rios e configura√ß√µes da sua pr√≥pria empresa.",permissoes:u.slice(0,12).map(o=>o.nome)},{id:3,nome_perfil:"supervisor",descricao:"Acesso limitado para visualiza√ß√£o e edi√ß√£o.",permissoes:u.slice(0,8).map(o=>o.nome)},{id:4,nome_perfil:"usuario_comum",descricao:"Acesso restrito a dados pessoais.",permissoes:u.slice(0,3).map(o=>o.nome)},{id:12,nome_perfil:"Teste",descricao:"Teste",permissoes:u.slice(0,5).map(o=>o.nome)}];z(r),c({kind:"info",message:"Exibindo perfis de exemplo para demonstra√ß√£o."})}finally{x(!1)}}async function T(s){s.preventDefault();const r=g!==null,o=r?"webhook/edit-profile":"webhook/create-profile",a=r?"Editando":"Criando";try{x(!0),console.log(`${a} perfil:`,t);const i=t.permissoes.map(f=>{const V=parseInt(f);return console.log(`üîç Convertendo string ${f} -> n√∫mero ${V}`),V}).filter(f=>!isNaN(f));console.log("üîç Permiss√µes convertidas para IDs num√©ricos:",i);const m={name:t.nome_perfil,description:t.descricao,permissoes:i};r&&g&&(m.id=g.id),console.log("Payload enviado:",m);const w=await C(o,{method:"POST",data:m});if(console.log(`Resposta do ${o}:`,w),typeof w.data=="string"&&w.data.includes("<!DOCTYPE html>")){console.warn("Webhook retornou HTML em vez de JSON - webhook pode n√£o existir"),c({kind:"warning",message:`Webhook de ${r?"edi√ß√£o":"cria√ß√£o"} de perfil n√£o est√° dispon√≠vel. Verifique a configura√ß√£o do n8n.`});return}const n=w.data;console.log("üîç Resultado completo:",n),console.log("üîç Tipo do resultado:",typeof n),console.log("üîç √â array?",Array.isArray(n));let k=!1;Array.isArray(n)&&n.length>0?n[0]&&n[0].success?(k=!0,console.log("üîç Sucesso detectado no array com success!")):n[0]&&n[0].id&&n[0].nome_perfil&&(k=!0,console.log("üîç Sucesso detectado no array com dados do perfil!")):n&&n.success&&(k=!0,console.log("üîç Sucesso detectado no objeto!")),k?(c({kind:"success",message:r?"Perfil editado com sucesso!":"Perfil criado com sucesso!"}),d({nome_perfil:"",descricao:"",permissoes:[]}),p(!1),_(!1),S(null),v()):c({kind:"error",message:r?"Erro ao editar perfil.":"Erro ao criar perfil."})}catch(i){console.error("Erro ao processar perfil:",i),c({kind:"error",message:r?"Erro ao editar perfil.":"Erro ao criar perfil."})}finally{x(!1)}}function q(s){d(r=>{const o=r.permissoes.includes(s)?r.permissoes.filter(a=>a!==s):[...r.permissoes,s];return{...r,permissoes:o}})}function y(s,r){const o=s.map(a=>a.id.toString());d(a=>{let i=[...a.permissoes];return r?o.forEach(m=>{i.includes(m)||i.push(m)}):i=i.filter(m=>!o.includes(m)),{...a,permissoes:i}})}function F(){const s=u.map(r=>r.id.toString());d(r=>({...r,permissoes:s}))}function O(){d(s=>({...s,permissoes:[]}))}function A(){const s={Navega√ß√£o:[],Dashboard:[],Upload:[],Agente:[],Sauda√ß√µes:[],Empresas:[],Usu√°rios:[],Perfis:[],Configura√ß√µes:[],Webhooks:[]};return u.forEach(r=>{const o=r.nome.toLowerCase();o.includes("nav_")?s.Navega√ß√£o.push(r):o.includes("dashboard")?s.Dashboard.push(r):o.includes("upload")?s.Upload.push(r):o.includes("agente")?s.Agente.push(r):o.includes("saudacao")?s.Sauda√ß√µes.push(r):o.includes("empresa")?s.Empresas.push(r):o.includes("usuario")?s.Usu√°rios.push(r):o.includes("perfil")?s.Perfis.push(r):o.includes("config")?s.Configura√ß√µes.push(r):o.includes("webhook")&&s.Webhooks.push(r)}),Object.entries(s).filter(([r,o])=>o.length>0).map(([r,o])=>({name:r,permissions:o.sort((a,i)=>a.descricao.localeCompare(i.descricao))}))}function J(s){U(r=>{const o=new Set(r);return o.has(s)?o.delete(s):o.add(s),o})}function X(s){let r=[];Array.isArray(s.permissoes)?r=s.permissoes.map(o=>o.toString()):typeof s.permissoes=="string"&&(r=s.permissoes.split(",").map(o=>o.trim())),S(s),d({nome_perfil:s.nome_perfil,descricao:s.descricao||"",permissoes:r}),_(!0)}function L(){S(null),_(!1),d({nome_perfil:"",descricao:"",permissoes:[]})}async function K(s){if(confirm(`Tem certeza que deseja deletar o perfil "${s.nome_perfil}"? Esta a√ß√£o n√£o pode ser desfeita.`))try{x(!0),console.log("Deletando perfil:",s.id),await C("webhook/delete-profile",{method:"POST",data:{profileId:s.id}}),c({kind:"success",message:"Perfil deletado com sucesso!"}),await v()}catch(r){console.error("Erro ao deletar perfil:",r),c({kind:"error",message:"Erro ao deletar perfil."})}finally{x(!1)}}const h=D.filter(s=>(s.nome_perfil||"").toLowerCase().includes(N.toLowerCase())||(s.descricao||"").toLowerCase().includes(N.toLowerCase()));return console.log("Termo de busca:",N),console.log("Perfis antes do filtro:",D.length),console.log("Perfis ap√≥s filtro:",h.length),console.log("Perfis filtrados:",h.map(s=>`${s.nome_perfil} (ID: ${s.id})`)),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Gerenciamento de Perfis"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Gerencie perfis de acesso e permiss√µes"})]}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar perfis por nome ou descri√ß√£o...",value:N,onChange:s=>B(s.target.value),className:"input w-full pl-10"}),e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),e.jsxs("button",{onClick:v,className:"btn-secondary flex items-center gap-2 rounded-lg px-4 py-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Atualizar"]}),e.jsxs("button",{onClick:()=>p(!0),className:"btn-primary flex items-center gap-2 rounded-lg px-4 py-2",children:[e.jsx(G,{className:"w-4 h-4"}),"Novo Perfil"]})]})})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onWheel:s=>s.stopPropagation(),onClick:s=>{s.target===s.currentTarget&&p(!1)},children:e.jsxs("div",{className:"bg-gray-800 rounded-lg w-full h-full max-w-7xl max-h-[95vh] flex flex-col","data-create-form":!0,onWheel:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[e.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Criar Novo Perfil"}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-white p-2 rounded-lg hover:bg-gray-700 transition-colors",children:e.jsx(P,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex-1 overflow-hidden p-6",children:e.jsxs("form",{onSubmit:T,className:"h-full flex flex-col space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nome do Perfil"}),e.jsx("input",{type:"text",className:"input w-full",value:t.nome_perfil,onChange:s=>d({...t,nome_perfil:s.target.value}),placeholder:"Ex: Gestor Empresa",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Descri√ß√£o"}),e.jsx("textarea",{className:"input w-full",value:t.descricao,onChange:s=>d({...t,descricao:s.target.value}),placeholder:"Descreva o perfil e suas responsabilidades",rows:3})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("label",{className:"block text-lg font-medium text-gray-300",children:"Permiss√µes"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-gray-400",children:[t.permissoes.length," selecionada(s)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>F(),className:"text-xs px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Selecionar Todas"}),e.jsx("button",{type:"button",onClick:()=>O(),className:"text-xs px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors",children:"Limpar Todas"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-4 relative",children:I?e.jsx("div",{className:"text-center py-4",children:e.jsxs("div",{className:"inline-flex items-center gap-2 text-gray-400",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}),"Carregando permiss√µes..."]})}):e.jsx("div",{className:"space-y-6",children:A().map(s=>e.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 sticky top-0 bg-gray-700 z-10 py-2 -mx-6 px-6 rounded-t-lg border-b border-gray-600",children:[e.jsxs("h4",{className:"text-lg font-semibold text-blue-400 flex items-center gap-3",children:[e.jsx("span",{className:"w-3 h-3 bg-blue-400 rounded-full"}),s.name,e.jsxs("span",{className:"text-sm text-gray-400",children:["(",s.permissions.length," permiss√µes)"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>y(s.permissions,!0),className:"text-sm px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Todas"}),e.jsx("button",{type:"button",onClick:()=>y(s.permissions,!1),className:"text-sm px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors",children:"Nenhuma"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:s.permissions.map(r=>{const o=t.permissoes.includes(r.id.toString());return e.jsxs("label",{className:"flex items-start gap-3 p-4 bg-gray-600 rounded-lg hover:bg-gray-500 cursor-pointer transition-colors border border-gray-500",children:[e.jsx("input",{type:"checkbox",checked:o,onChange:()=>q(r.id.toString()),className:"mt-1 w-5 h-5 text-blue-600 bg-gray-600 border-gray-500 rounded focus:ring-blue-500 focus:ring-2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-white mb-1",children:r.descricao}),e.jsx("div",{className:"text-xs text-gray-400 font-mono bg-gray-700 px-2 py-1 rounded",children:r.nome})]})]},r.id)})})]},s.name))})})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t border-gray-600",children:[e.jsxs("button",{type:"button",onClick:()=>p(!1),className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-500 transition-colors flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4"}),"Cancelar"]}),e.jsxs("button",{type:"submit",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"Criar Perfil"]})]})]})})]})}),j&&g&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-2 sm:p-4",onWheel:s=>s.stopPropagation(),onClick:s=>{s.target===s.currentTarget&&L()},children:e.jsxs("div",{className:"bg-card border border-border rounded-lg w-full h-full max-w-7xl max-h-[95vh] flex flex-col",onWheel:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ee,{className:"w-6 h-6 text-primary"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:"Editar Perfil"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:g.nome_perfil})]})]}),e.jsx("button",{onClick:L,className:"text-muted-foreground hover:text-foreground p-2 rounded-lg hover:bg-muted transition-colors",children:e.jsx(P,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex-1 overflow-hidden p-4 sm:p-6",children:e.jsxs("form",{className:"h-full flex flex-col space-y-4",onSubmit:T,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Nome do Perfil"}),e.jsx("input",{type:"text",value:t.nome_perfil,onChange:s=>d(r=>({...r,nome_perfil:s.target.value})),className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Descri√ß√£o"}),e.jsx("textarea",{value:t.descricao,onChange:s=>d(r=>({...r,descricao:s.target.value})),className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary",rows:3})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Permiss√µes"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.permissoes.length," selecionada(s)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>F(),className:"text-sm px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Selecionar Todas"}),e.jsx("button",{type:"button",onClick:()=>O(),className:"text-sm px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors",children:"Limpar Todas"})]})]})]}),e.jsx("div",{className:"flex-1 min-h-0",children:e.jsx("div",{className:"h-full overflow-y-auto space-y-4",children:I?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:e.jsxs("div",{className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-muted-foreground border-t-transparent rounded-full animate-spin"}),"Carregando permiss√µes..."]})}):e.jsx("div",{className:"space-y-4",children:A().map(s=>e.jsxs("div",{className:"bg-muted/20 rounded-lg p-4 border border-border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sticky top-0 bg-muted/20 z-10 py-2 -mx-4 px-4 rounded-t-lg border-b border-border",children:[e.jsxs("h4",{className:"text-sm font-semibold text-primary flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-primary rounded-full"}),s.name,e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",s.permissions.length," permiss√µes)"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>y(s.permissions,!0),className:"text-xs px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Todas"}),e.jsx("button",{type:"button",onClick:()=>y(s.permissions,!1),className:"text-xs px-2 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors",children:"Nenhuma"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:s.permissions.map(r=>{const o=t.permissoes.includes(r.id.toString());return e.jsxs("label",{className:"flex items-start gap-3 p-3 bg-background rounded-lg border border-border hover:bg-muted/50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:o,onChange:()=>q(r.id.toString()),className:"mt-1 w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary focus:ring-2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-foreground",children:r.descricao}),e.jsx("div",{className:"text-xs text-muted-foreground font-mono",children:r.nome})]})]},r.id)})})]},s.name))})})})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between p-4 sm:p-6 border-t border-border gap-3",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.permissoes.length," permiss√£o(√µes) selecionada(s)"]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 w-full sm:w-auto",children:[e.jsxs("button",{onClick:L,className:"flex-1 sm:flex-none px-4 sm:px-6 py-2 sm:py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-500 transition-colors flex items-center justify-center gap-2 text-sm",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Cancelar"}),e.jsx("span",{className:"sm:hidden",children:"Cancelar"})]}),e.jsxs("button",{onClick:T,className:"flex-1 sm:flex-none px-4 sm:px-6 py-2 sm:py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors flex items-center justify-center gap-2 text-sm",children:[e.jsx(H,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Salvar Altera√ß√µes"}),e.jsx("span",{className:"sm:hidden",children:"Salvar"})]})]})]})]})}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Perfis de Acesso"}),e.jsxs("p",{className:"text-muted-foreground mt-1",children:[h.length," perfil(is) encontrado(s)"]})]}),R?e.jsx("div",{className:"card-content text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 text-muted-foreground",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-muted-foreground border-t-transparent rounded-full animate-spin"}),"Carregando perfis..."]})}):h.length===0?e.jsxs("div",{className:"card-content text-center",children:[e.jsx(re,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Nenhum perfil encontrado"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Crie seu primeiro perfil de acesso para come√ßar"}),e.jsxs("button",{onClick:()=>p(!0),className:"btn-primary flex items-center gap-2 rounded-lg px-4 py-2 mx-auto",children:[e.jsx(G,{className:"w-4 h-4"}),"Criar Primeiro Perfil"]})]}):e.jsx("div",{className:"divide-y divide-border",children:h.map(s=>e.jsx("div",{className:"card-content",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-3 mb-2",children:e.jsxs("button",{onClick:()=>J(s.id),className:"flex items-center gap-2 hover:bg-muted p-2 rounded-lg transition-colors",children:[W.has(s.id)?e.jsx(oe,{className:"w-4 h-4 text-muted-foreground"}):e.jsx(ne,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:s.nome_perfil}),e.jsxs("span",{className:"px-2 py-1 bg-primary text-primary-foreground text-xs rounded-full",children:["ID: ",s.id]}),e.jsxs("span",{className:"px-2 py-1 bg-muted text-muted-foreground text-xs rounded-full",children:[s.permissoes?.length||0," permiss√µes"]})]})}),s.descricao&&e.jsx("p",{className:"text-muted-foreground mb-3 ml-8",children:s.descricao}),W.has(s.id)&&e.jsxs("div",{className:"ml-8",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-muted-foreground text-sm mb-3",children:s.permissoes&&s.permissoes.length>0?`${s.permissoes.length} permiss√µes configuradas`:"Nenhuma permiss√£o definida"}),s.permissoes&&s.permissoes.length>0&&e.jsx("div",{className:"space-y-2",children:A().map(r=>{const o=r.permissions.filter(a=>s.permissoes?.includes(a.nome));return o.length===0?null:e.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[e.jsxs("h5",{className:"text-sm font-medium text-foreground mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-primary rounded-full"}),r.name," (",o.length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:o.map(a=>e.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary text-xs rounded-full",children:a.descricao},a.id))})]},r.name)})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>X(s),className:"btn-secondary flex items-center gap-2 text-sm",children:[e.jsx(ae,{className:"w-4 h-4"}),"Editar Perfil"]}),e.jsxs("button",{onClick:()=>K(s),className:"btn-danger flex items-center gap-2 text-sm",children:[e.jsx(te,{className:"w-4 h-4"}),"Deletar Perfil"]})]})]})]})})},s.id))})]})]})}export{fe as default};
